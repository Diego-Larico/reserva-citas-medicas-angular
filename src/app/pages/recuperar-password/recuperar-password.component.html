<div class="password-reset-container">
  <h2>Cambiar Contraseña</h2>

  <!-- Paso 1: Ingresar correo -->
  <form *ngIf="step === 'recuperar'" (ngSubmit)="enviarCodigo()" #recoveryForm="ngForm">
    <div class="form-group">
      <label for="correo">Correo Electrónico</label>
      <input type="email" id="correo" name="correo" [(ngModel)]="correo" placeholder="Ingresar email" required />
    </div>
    <button type="submit" class="btn-recovery" [disabled]="cargando">Enviar Código</button>
    <button type="button" class="btn-cancelar" (click)="cerrarRecuperar()" style="margin-top:10px;">Cancelar</button>
  </form>

  <!-- Paso 2: Verificar código -->
  <form *ngIf="step === 'verificar'" (ngSubmit)="verificarCodigo()" #codeForm="ngForm">
    <div class="form-group">
      <label for="codigo">Código de Verificación</label>
      <input type="text" id="codigo" name="codigo" [(ngModel)]="codigo" placeholder="Ingresar código" required />
    </div>
    <button type="submit" class="btn-verify" [disabled]="cargando">Verificar</button>
    <button type="button" class="btn-cancelar" (click)="cerrarRecuperar()" style="margin-top:10px;">Cancelar</button>
  </form>

  <!-- Paso 3: Nueva contraseña -->
  <form *ngIf="step === 'nueva_contrasena'" (ngSubmit)="cambiarContrasena()" #passwordForm="ngForm">
    <div class="form-group">
      <label for="nueva_contrasena">Nueva Contraseña</label>
      <input type="password" id="nueva_contrasena" name="nueva_contrasena" [(ngModel)]="nuevaContrasena" placeholder="Ingresar nueva contraseña" required minlength="8" />
    </div>
    <div class="form-group">
      <label for="confirmar_contrasena">Confirmar Contraseña</label>
      <input type="password" id="confirmar_contrasena" name="confirmar_contrasena" [(ngModel)]="confirmarContrasena" placeholder="Confirmar nueva contraseña" required minlength="8" />
    </div>
    <button type="submit" class="btn-reset" [disabled]="cargando">Restablecer</button>
    <button type="button" class="btn-cancelar" (click)="cerrarRecuperar()" style="margin-top:10px;">Cancelar</button>
  </form>

  <div *ngIf="mensaje" class="error-message" style="margin-top:1rem;">{{ mensaje }}</div>
</div>
